---
description: 
globs: 
alwaysApply: false
---
MANDATORY DEVELOPMENT PROCESS RULES

Step 1: Analyze the Solution and Make a Plan

- Analyze the existing codebase carefully before making any changes.
- Create a comprehensive, step-by-step plan for how the change will be implemented.
- Do not begin implementation until the plan is complete.

Step 2: Define Test Requirements

- Determine if any new tests are needed.
- Determine if any existing tests need to be updated or removed due to changes in functionality.
- If tests need to be created, updated, or removed, do this before implementing the change.
- Use failing tests to guide the implementation and confirm correctness.
- Consider and handle all possible edge cases introduced by the new functionality.

Test Naming and Structure Rules

- Test files must have the "_test" suffix added to their package name.
- For example, if the package being tested is called "example", the tests should use the package name "example_test".
- This is important and must always be followed.
- Only test exported (public) functions directly.
- Private (unexported) functions must be tested indirectly via the public functions that use them.

Step 3: Create a Test Checklist

- List all exported functions.
- For each function, list:
  - All valid parameter options
  - All possible edge cases
- Use this list as a checklist to ensure complete test coverage.

Step 4: Apply Test Changes

- Create, update, or remove tests according to the test checklist.
- Ensure all tests accurately reflect the expected functionality as defined in the implementation plan.

Step 5: Implement the Feature

- Implement the change that is being requested.
- Take the time needed to ensure the implementation is correct and thorough.
- Be prepared to reassess and revise your strategy if challenges arise during implementation.

Step 6: Validate with Tests

- Run all tests using the following command:
  go test ./...
- If tests are failing, analyze whether the implementation is incorrect or the test case is invalid, based on the expected outcomes of the change request.
- Iterate until all tests pass.

Step 7: Run Static Analysis

- Use the following command to run static code analysis:
  golangci-lint run
- Work through linting issues one by one.
- Start with the most difficult or complex issues.
- Iterate until there are no issues reported by the linter.

Step 8: Re-validate After Linting

- After resolving all linting issues, rerun the test suite as a final check to ensure stability.

Step 9: Final Review

- Review all changes to ensure completeness and alignment with the original request.
- Ensure code, tests, and structure follow project conventions.

Agent Instructions

- You are an agent. Continue working until the entire query is fully resolved.
- If you are unsure about file contents or project structure, use your tools to inspect them directly.
- Do not guess or make assumptions.
- Plan thoroughly before each action.
- Reflect carefully after using tools or taking actions.
- Edit files in small, focused chunks.
